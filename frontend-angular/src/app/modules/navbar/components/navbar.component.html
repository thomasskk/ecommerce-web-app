<mat-toolbar class="navbar">
  <form class="search" (submit)="search()">
    <input id="input" placeholder="Search Products" />
    <mat-icon (click)="search()" type="submit">search</mat-icon>
  </form>

  <span class="logo" [routerLink]="['/home/0']">║ ＣＬＯＴＨＩＮＧ ║</span>

  <div class="utils">
    <button class="home" mat-button [routerLink]="['/home/0']">
      <mat-icon> home </mat-icon>
    </button>
    <button mat-flat-button disableRipple="true" [routerLink]="['/cart']" class="cartButton">
      <div class="menuCart">
        <div class="itemContainer">
          <div class="item" *ngFor="let item of cartItems | async; let indexCart = index">
            <div class="img">
              <img src="{{ item.image }}" />
            </div>
            <div class="textItem">
              <p class="namePriceQ">
                <span style="font-family: 'HMSansLatin-SemiBold'"> {{ item.name }}</span>
                <br />
                Price : {{ item.price }} $
                <br />
                Quantity : {{ item.quantity }} <br /><br /><br />
                <span style="font-family: 'HMSansLatin-SemiBold'"
                  >Total : {{ item.price * item.quantity }} $</span
                >
              </p>
            </div>
          </div>
        </div>
        <div class="containerPay">
          <ng-container *ngIf="(total | async) === 0">
            <span style="font-family: 'HMSansLatin-SemiBold'">YOUR SHOPPING BAG IS EMPTY!</span>
          </ng-container>

          <ng-container *ngIf="(total | async) != 0">
            <div class="orderValue">
              <span>ORDER VALUE</span>
              <span>{{ total | async }} $</span>
            </div>
            <div class="shipping">
              <span>Shipping</span>
              <span>4,99 $</span>
            </div>
          </ng-container>

          <hr />
          <div class="total">
            <span>Total:</span>
            <span>{{ (total | async) != 0 ? (total | async)! + 4.99 + ' $' : '0 $' }}</span>
          </div>
          <button class="finish" [attr.disabled]="(total | async) === 0 ? true : null">
            CONTINUE TO CHECKOUT
          </button>
        </div>
      </div>
      <mat-icon matBadge="" matBadgeColor="warn" matBadgeSize="small" class="cartIcon">
        shopping_basket
      </mat-icon>
      <label class="cartLabel">My cart</label>
    </button>

    <span style="margin-right: 10px" class="separator"></span>
    <button mat-flat-button class="userButton">
      <mat-icon> account_circle </mat-icon>
      <label class="accountLabel"> My account</label>
      <div class="userMenu">
        <ng-container *ngIf="!loggedIn(); else logoutTemplate">
          <button [routerLink]="['/login']" >
            <span>LOGIN</span>
          </button>
          <hr>
          <button [routerLink]="['/register']">
            <span>REGISTER</span>
          </button>
        </ng-container>
        <ng-template #logoutTemplate>
          <button [routerLink]="['/home/0']" (click)="logout()" >
            <span>LOGOUT</span>
          </button>
        </ng-template>
      </div>
  
    </button>
  </div>
</mat-toolbar>
